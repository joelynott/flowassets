---

# =============================================================================
# Flow Panel - panelConfig.yaml
# Topología de red: Chiletur
#
# Estrategia de color:
#
#   Dispositivos (router/switch):
#     - fillColor + fillColorElementFilter {name: 'path', position: '1'}
#       -> colorea SOLO el primer path (cuerpo del ícono), preservando detalles
#     - labelColor -> colorea el texto del label
#     - strokeColor -> OMITIDO (el stroke blanco del SVG ya forma parte del diseño)
#
#   Enlaces:
#     - strokeColor ÚNICAMENTE -> colorea la línea y las flechas
#     - fillColor -> OMITIDO para no interferir con las puntas de flecha
#
# Estados:
#   Routers/Switches: up=sin cambio | down=rojo | error=amarillo | unknown=gris
#   Enlaces:          up=verde      | down=rojo | error=amarillo | unknown=gris
# =============================================================================

cellIdPreamble: "cell-"
datapoint: "last"
gradientMode: "none"

dataRefTransform:
  namespaced: true
  queries:
    A:
      tabularKeyColumn: "name"

cells:

  # ============================================================================
  # ROUTER 1
  # ============================================================================
  router_1:
    dataRef: "A.router_1.status"

    fillColor:
      dataRef: "A.router_1.status"
      gradientMode: "none"
      thresholdPatterns:
        - {color: "red",    pattern: "down"}
        - {color: "yellow", pattern: "error"}
        - {color: "gray",   pattern: "unknown"}

    # Apunta solo al primer path del ícono (cuerpo del router)
    # El segundo path contiene las flechas blancas internas -> no se toca
    fillColorElementFilter:
      - {name: "path", position: "1"}

    labelColor:
      dataRef: "A.router_1.status"
      gradientMode: "none"
      thresholdPatterns:
        - {color: "red",    pattern: "down"}
        - {color: "yellow", pattern: "error"}
        - {color: "gray",   pattern: "unknown"}

  # ============================================================================
  # ROUTER 2
  # ============================================================================
  router_2:
    dataRef: "A.router_2.status"

    fillColor:
      dataRef: "A.router_2.status"
      gradientMode: "none"
      thresholdPatterns:
        - {color: "red",    pattern: "down"}
        - {color: "yellow", pattern: "error"}
        - {color: "gray",   pattern: "unknown"}

    fillColorElementFilter:
      - {name: "path", position: "1"}

    labelColor:
      dataRef: "A.router_2.status"
      gradientMode: "none"
      thresholdPatterns:
        - {color: "red",    pattern: "down"}
        - {color: "yellow", pattern: "error"}
        - {color: "gray",   pattern: "unknown"}

  # ============================================================================
  # SWITCH 1
  # El switch tiene 3 paths: posicion 1 = cuerpo principal (trapecio)
  # ============================================================================
  switch_1:
    dataRef: "A.switch_1.status"

    fillColor:
      dataRef: "A.switch_1.status"
      gradientMode: "none"
      thresholdPatterns:
        - {color: "red",    pattern: "down"}
        - {color: "yellow", pattern: "error"}
        - {color: "gray",   pattern: "unknown"}

    fillColorElementFilter:
      - {name: "path", position: "1"}

    labelColor:
      dataRef: "A.switch_1.status"
      gradientMode: "none"
      thresholdPatterns:
        - {color: "red",    pattern: "down"}
        - {color: "yellow", pattern: "error"}
        - {color: "gray",   pattern: "unknown"}

  # ============================================================================
  # ENLACE R1-R2  -> solo strokeColor
  # ============================================================================
  link_r1_r2:
    dataRef: "A.link_r1_r2.status"

    strokeColor:
      dataRef: "A.link_r1_r2.status"
      gradientMode: "none"
      thresholdPatterns:
        - {color: "green",  pattern: "up"}
        - {color: "red",    pattern: "down"}
        - {color: "yellow", pattern: "error"}
        - {color: "gray",   pattern: "unknown"}

  # ============================================================================
  # ENLACE R2-SW1  -> solo strokeColor
  # ============================================================================
  link_r2_sw1:
    dataRef: "A.link_r2_sw1.status"

    strokeColor:
      dataRef: "A.link_r2_sw1.status"
      gradientMode: "none"
      thresholdPatterns:
        - {color: "green",  pattern: "up"}
        - {color: "red",    pattern: "down"}
        - {color: "yellow", pattern: "error"}
        - {color: "gray",   pattern: "unknown"}
