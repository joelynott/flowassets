---

# =============================================================================
# Flow Panel - panelConfig.yaml
# TopologÃ­a de red: Chiletur
#
# Datasource: Infinity (JSON tabular)
# Query name: A
# Campo clave: "name" -> genera dataRefs como A.<n>.status
#
# Estados de color:
#   Routers/Switches: up=sin cambio | down=rojo | error=amarillo | unknown=gris
#   Enlaces:          up=verde      | down=rojo | error=amarillo | unknown=gris
# =============================================================================

cellIdPreamble: "cell-"
datapoint: "last"
gradientMode: "none"

dataRefTransform:
  namespaced: true
  queries:
    A:
      tabularKeyColumn: "name"

cells:

  # ============================================================================
  # ROUTER 1
  # ============================================================================
  router_1:
    dataRef: "A.router_1.status"

    fillColor:
      dataRef: "A.router_1.status"
      gradientMode: "none"
      thresholdPatterns:
        - {color: "red",    pattern: "down"}
        - {color: "yellow", pattern: "error"}
        - {color: "gray",   pattern: "unknown"}

    strokeColor:
      dataRef: "A.router_1.status"
      gradientMode: "none"
      thresholdPatterns:
        - {color: "red",    pattern: "down"}
        - {color: "yellow", pattern: "error"}
        - {color: "gray",   pattern: "unknown"}

  # ============================================================================
  # ROUTER 2
  # ============================================================================
  router_2:
    dataRef: "A.router_2.status"

    fillColor:
      dataRef: "A.router_2.status"
      gradientMode: "none"
      thresholdPatterns:
        - {color: "red",    pattern: "down"}
        - {color: "yellow", pattern: "error"}
        - {color: "gray",   pattern: "unknown"}

    strokeColor:
      dataRef: "A.router_2.status"
      gradientMode: "none"
      thresholdPatterns:
        - {color: "red",    pattern: "down"}
        - {color: "yellow", pattern: "error"}
        - {color: "gray",   pattern: "unknown"}

  # ============================================================================
  # SWITCH 1
  # ============================================================================
  switch_1:
    dataRef: "A.switch_1.status"

    fillColor:
      dataRef: "A.switch_1.status"
      gradientMode: "none"
      thresholdPatterns:
        - {color: "red",    pattern: "down"}
        - {color: "yellow", pattern: "error"}
        - {color: "gray",   pattern: "unknown"}

    strokeColor:
      dataRef: "A.switch_1.status"
      gradientMode: "none"
      thresholdPatterns:
        - {color: "red",    pattern: "down"}
        - {color: "yellow", pattern: "error"}
        - {color: "gray",   pattern: "unknown"}

  # ============================================================================
  # ENLACE R1-R2
  # ============================================================================
  link_r1_r2:
    dataRef: "A.link_r1_r2.status"

    strokeColor:
      dataRef: "A.link_r1_r2.status"
      gradientMode: "none"
      thresholdPatterns:
        - {color: "green",  pattern: "up"}
        - {color: "red",    pattern: "down"}
        - {color: "yellow", pattern: "error"}
        - {color: "gray",   pattern: "unknown"}

    fillColor:
      dataRef: "A.link_r1_r2.status"
      gradientMode: "none"
      thresholdPatterns:
        - {color: "green",  pattern: "up"}
        - {color: "red",    pattern: "down"}
        - {color: "yellow", pattern: "error"}
        - {color: "gray",   pattern: "unknown"}

  # ============================================================================
  # ENLACE R2-SW1
  # ============================================================================
  link_r2_sw1:
    dataRef: "A.link_r2_sw1.status"

    strokeColor:
      dataRef: "A.link_r2_sw1.status"
      gradientMode: "none"
      thresholdPatterns:
        - {color: "green",  pattern: "up"}
        - {color: "red",    pattern: "down"}
        - {color: "yellow", pattern: "error"}
        - {color: "gray",   pattern: "unknown"}

    fillColor:
      dataRef: "A.link_r2_sw1.status"
      gradientMode: "none"
      thresholdPatterns:
        - {color: "green",  pattern: "up"}
        - {color: "red",    pattern: "down"}
        - {color: "yellow", pattern: "error"}
        - {color: "gray",   pattern: "unknown"}
